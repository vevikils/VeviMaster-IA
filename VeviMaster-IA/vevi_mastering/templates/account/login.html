{% extends "base.html" %}
{% load i18n %}
{% load account socialaccount %}

{% block title %}{% trans "Iniciar Sesión" %}{% endblock %}

{% block content %}
<div class="row justify-content-center align-items-center" style="min-height: 80vh;">
    <div class="col-md-6 col-lg-5">
        <div class="card shadow-lg border-0 rounded-lg">
            <div class="card-header justify-content-center bg-transparent border-0 mt-4">
                <h3 class="font-weight-light my-2 text-center" style="color: #6366f1; font-weight: 700;">VeviMaster IA
                </h3>
                <p class="text-center text-muted">Inicia sesión para continuar</p>
            </div>
            <div class="card-body px-5 pb-5">

                {% get_providers as socialaccount_providers %}
                {% if socialaccount_providers %}
                <div class="d-grid gap-2 mb-4">
                    {% for provider in socialaccount_providers %}
                    {% if provider.id == "google" %}
                    <a title="{{ provider.name }}" class="btn btn-light border fw-bold py-2"
                        href="{% provider_login_url provider.id process='login' scope=scope auth_params=auth_params %}"
                        style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                        <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" alt="Google"
                            style="width: 20px;">
                        Continuar con Google
                    </a>
                    {% endif %}
                    {% endfor %}
                </div>

                <div class="position-relative mb-4">
                    <hr class="text-muted">
                    <span class="position-absolute top-50 start-50 translate-middle bg-white px-3 text-muted small">o
                        usa tu email</span>
                </div>
                {% endif %}

                <form class="login" method="POST" action="{% url 'account_login' %}">
                    {% csrf_token %}

                    {% if form.errors %}
                    <div class="alert alert-danger">
                        {% for field in form %}
                        {% for error in field.errors %}
                        {{ error }}<br>
                        {% endfor %}
                        {% endfor %}
                        {% for error in form.non_field_errors %}
                        {{ error }}
                        {% endfor %}
                    </div>
                    {% endif %}

                    <div class="form-floating mb-3">
                        <input type="email" name="login" class="form-control" id="id_login"
                            placeholder="name@example.com" required>
                        <label for="id_login">Correo Electrónico</label>
                    </div>
                    <div class="form-floating mb-3">
                        <input type="password" name="password" class="form-control" id="id_password"
                            placeholder="Password" required>
                        <label for="id_password">Contraseña</label>
                    </div>

                    <div class="d-grid gap-2 mt-4">
                        <button class="btn btn-primary btn-lg" type="submit"
                            style="background: linear-gradient(135deg, #6366f1, #8b5cf6); border: none;">
                            {% trans "Entrar" %}
                        </button>
                    </div>
                </form>
            </div>
            <div class="card-footer text-center py-3 border-0 bg-transparent">
                <div class="small"><a href="{% url 'account_signup' %}"
                        style="color: #6366f1; text-decoration: none;">¿No tienes cuenta? Regístrate</a></div>
            </div>
        </div>
    </div>
</div>
{% endblock %}